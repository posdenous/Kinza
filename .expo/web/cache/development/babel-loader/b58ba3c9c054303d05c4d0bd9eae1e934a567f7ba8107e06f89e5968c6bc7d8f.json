{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport { useState, useEffect, useCallback } from 'react';\nimport { collection, query, where, getDocs, doc, updateDoc, orderBy, limit, getDoc } from 'firebase/firestore';\nimport { firestore } from '../../firebase/firebaseConfig';\nimport authService from '../auth/authService';\nimport { useUserRole } from '../hooks/useUserRole';\nimport { useApiWithRetry } from './common/useApiWithRetry';\nvar useReports = function useReports() {\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    reports = _useState2[0],\n    setReports = _useState2[1];\n  var _useState3 = useState(true),\n    _useState4 = _slicedToArray(_useState3, 2),\n    loading = _useState4[0],\n    setLoading = _useState4[1];\n  var _useState5 = useState(null),\n    _useState6 = _slicedToArray(_useState5, 2),\n    error = _useState6[0],\n    setError = _useState6[1];\n  var _useState7 = useState(0),\n    _useState8 = _slicedToArray(_useState7, 2),\n    refreshTrigger = _useState8[0],\n    setRefreshTrigger = _useState8[1];\n  var _useUserRole = useUserRole(),\n    role = _useUserRole.role,\n    userCityId = _useUserRole.userCityId;\n  var user = authService.getCurrentUser();\n  var isAdmin = role === 'admin';\n  var fetchReportsApiCall = useCallback(_asyncToGenerator(function* () {\n    if (!isAdmin || !user) {\n      throw new Error('User not authorized to view reports');\n    }\n    var pendingReportsQuery = query(collection(firestore, 'reports'), where('status', '==', 'pending'), where('cityId', '==', userCityId), orderBy('reportedAt', 'desc'), limit(50));\n    var reportsSnapshot = yield getDocs(pendingReportsQuery);\n    var reportsData = [];\n    reportsSnapshot.forEach(function (doc) {\n      var _reportData$reportedA;\n      var reportData = doc.data();\n      reportsData.push({\n        id: doc.id,\n        type: reportData.type,\n        targetId: reportData.targetId,\n        reason: reportData.reason,\n        details: reportData.details,\n        reportedBy: reportData.reportedBy,\n        reportedAt: new Date(((_reportData$reportedA = reportData.reportedAt) == null ? void 0 : _reportData$reportedA.toDate()) || Date.now()),\n        status: reportData.status,\n        cityId: reportData.cityId,\n        contentSnapshot: reportData.contentSnapshot\n      });\n    });\n    for (var i = 0; i < reportsData.length; i++) {\n      var report = reportsData[i];\n      if (!report.contentSnapshot) {\n        try {\n          var contentRef = doc(firestore, report.type + 's', report.targetId);\n          var contentSnapshot = yield getDoc(contentRef);\n          if (contentSnapshot.exists()) {\n            reportsData[i] = _objectSpread(_objectSpread({}, report), {}, {\n              contentSnapshot: contentSnapshot.data()\n            });\n          }\n        } catch (err) {\n          console.error(`Error fetching content for report ${report.id}:`, err);\n        }\n      }\n    }\n    return reportsData;\n  }), [isAdmin, user, userCityId, refreshTrigger]);\n  var _useApiWithRetry = useApiWithRetry(fetchReportsApiCall, {\n      maxRetries: 3,\n      baseDelay: 1000\n    }),\n    fetchReportsWithRetry = _useApiWithRetry.execute,\n    isRetrying = _useApiWithRetry.isRetrying;\n  useEffect(function () {\n    var fetchReports = function () {\n      var _ref2 = _asyncToGenerator(function* () {\n        if (!isAdmin || !user) {\n          setReports([]);\n          setLoading(false);\n          return;\n        }\n        setLoading(true);\n        setError(null);\n        try {\n          var result = yield fetchReportsWithRetry();\n          setReports(result);\n        } catch (err) {\n          console.error('Error fetching reports:', err);\n          if (err instanceof Error && err.message === 'User not authorized to view reports') {\n            setReports([]);\n            setError('User not authorized to view reports');\n          } else {\n            setError('Failed to load reports. Please try again.');\n          }\n        } finally {\n          setLoading(false);\n        }\n      });\n      return function fetchReports() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n    fetchReports();\n  }, [fetchReportsWithRetry, isAdmin, user]);\n  var resolveReport = function () {\n    var _ref3 = _asyncToGenerator(function* (report) {\n      if (!isAdmin || !user) return false;\n      try {\n        var reportRef = doc(firestore, 'reports', report.id);\n        yield updateDoc(reportRef, {\n          status: 'resolved',\n          resolvedAt: new Date(),\n          resolvedBy: user.uid\n        });\n        setReports(function (prev) {\n          return prev.filter(function (prevReport) {\n            return prevReport.id !== report.id;\n          });\n        });\n        return true;\n      } catch (err) {\n        console.error('Error resolving report:', err);\n        return false;\n      }\n    });\n    return function resolveReport(_x) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  var dismissReport = function () {\n    var _ref4 = _asyncToGenerator(function* (report) {\n      if (!isAdmin || !user) return false;\n      try {\n        var reportRef = doc(firestore, 'reports', report.id);\n        yield updateDoc(reportRef, {\n          status: 'dismissed',\n          resolvedAt: new Date(),\n          resolvedBy: user.uid\n        });\n        setReports(function (prev) {\n          return prev.filter(function (prevReport) {\n            return prevReport.id !== report.id;\n          });\n        });\n        return true;\n      } catch (err) {\n        console.error('Error dismissing report:', err);\n        return false;\n      }\n    });\n    return function dismissReport(_x2) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n  var refresh = function refresh() {\n    setRefreshTrigger(function (prev) {\n      return prev + 1;\n    });\n  };\n  return {\n    reports: reports,\n    loading: loading || isRetrying,\n    error: error,\n    resolveReport: resolveReport,\n    dismissReport: dismissReport,\n    refresh: refresh\n  };\n};\nexport default useReports;","map":{"version":3,"names":["useState","useEffect","useCallback","collection","query","where","getDocs","doc","updateDoc","orderBy","limit","getDoc","firestore","authService","useUserRole","useApiWithRetry","useReports","_useState","_useState2","_slicedToArray","reports","setReports","_useState3","_useState4","loading","setLoading","_useState5","_useState6","error","setError","_useState7","_useState8","refreshTrigger","setRefreshTrigger","_useUserRole","role","userCityId","user","getCurrentUser","isAdmin","fetchReportsApiCall","_asyncToGenerator","Error","pendingReportsQuery","reportsSnapshot","reportsData","forEach","_reportData$reportedA","reportData","data","push","id","type","targetId","reason","details","reportedBy","reportedAt","Date","toDate","now","status","cityId","contentSnapshot","i","length","report","contentRef","exists","_objectSpread","err","console","_useApiWithRetry","maxRetries","baseDelay","fetchReportsWithRetry","execute","isRetrying","fetchReports","_ref2","result","message","apply","arguments","resolveReport","_ref3","reportRef","resolvedAt","resolvedBy","uid","prev","filter","prevReport","_x","dismissReport","_ref4","_x2","refresh"],"sources":["/Users/brianwilliams/Documents/GitHub/Kinza/src/hooks/useReports.ts"],"sourcesContent":["import { useState, useEffect, useCallback } from 'react';\nimport { collection, query, where, getDocs, doc, updateDoc, orderBy, limit, getDoc } from 'firebase/firestore';\nimport { firestore } from '../../firebase/firebaseConfig';\nimport authService from '../auth/authService';\nimport { useUserRole } from '../hooks/useUserRole';\nimport { useApiWithRetry } from './common/useApiWithRetry';\n\n// Types for reports\nexport interface Report {\n  id: string;\n  type: 'event' | 'comment' | 'profile';\n  targetId: string;\n  reason: string;\n  details: string;\n  reportedBy: string;\n  reportedAt: Date;\n  status: 'pending' | 'resolved' | 'dismissed';\n  cityId: string;\n  contentSnapshot?: any;\n}\n\ninterface UseReportsResult {\n  reports: Report[];\n  loading: boolean;\n  error: string | null;\n  resolveReport: (report: Report) => Promise<boolean>;\n  dismissReport: (report: Report) => Promise<boolean>;\n  refresh: () => void;\n}\n\n/**\n * Custom hook for handling content reports\n */\nconst useReports = (): UseReportsResult => {\n  const [reports, setReports] = useState<Report[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [refreshTrigger, setRefreshTrigger] = useState(0);\n  \n  const { role, userCityId } = useUserRole();\n  const user = authService.getCurrentUser();\n\n  // Check if user has admin permissions\n  const isAdmin = role === 'admin';\n\n  // Create API call function for retry logic\n  const fetchReportsApiCall = useCallback(async () => {\n    if (!isAdmin || !user) {\n      throw new Error('User not authorized to view reports');\n    }\n\n    // Fetch pending reports for the admin's city\n    const pendingReportsQuery = query(\n      collection(firestore, 'reports'),\n      where('status', '==', 'pending'),\n      where('cityId', '==', userCityId),\n      orderBy('reportedAt', 'desc'),\n      limit(50)\n    );\n    \n    const reportsSnapshot = await getDocs(pendingReportsQuery);\n    const reportsData: Report[] = [];\n    \n    reportsSnapshot.forEach((doc) => {\n      const reportData = doc.data();\n      reportsData.push({\n        id: doc.id,\n        type: reportData.type,\n        targetId: reportData.targetId,\n        reason: reportData.reason,\n        details: reportData.details,\n        reportedBy: reportData.reportedBy,\n        reportedAt: new Date(reportData.reportedAt?.toDate() || Date.now()),\n        status: reportData.status,\n        cityId: reportData.cityId,\n        contentSnapshot: reportData.contentSnapshot,\n      });\n    });\n    \n    // Fetch content details for each report if not already included in snapshot\n    for (let i = 0; i < reportsData.length; i++) {\n      const report = reportsData[i];\n      \n      if (!report.contentSnapshot) {\n        try {\n          const contentRef = doc(firestore, report.type + 's', report.targetId);\n          const contentSnapshot = await getDoc(contentRef);\n          \n          if (contentSnapshot.exists()) {\n            reportsData[i] = {\n              ...report,\n              contentSnapshot: contentSnapshot.data(),\n            };\n          }\n        } catch (err) {\n          console.error(`Error fetching content for report ${report.id}:`, err);\n        }\n      }\n    }\n    \n    return reportsData;\n  }, [isAdmin, user, userCityId, refreshTrigger]);\n\n  // Use retry-enabled API call for fetching reports\n  const { execute: fetchReportsWithRetry, isRetrying } = useApiWithRetry(\n    fetchReportsApiCall,\n    {\n      maxRetries: 3,\n      baseDelay: 1000,\n    }\n  );\n\n  useEffect(() => {\n    const fetchReports = async () => {\n      if (!isAdmin || !user) {\n        setReports([]);\n        setLoading(false);\n        return;\n      }\n\n      setLoading(true);\n      setError(null);\n\n      try {\n        const result = await fetchReportsWithRetry();\n        setReports(result);\n      } catch (err) {\n        console.error('Error fetching reports:', err);\n        if (err instanceof Error && err.message === 'User not authorized to view reports') {\n          setReports([]);\n          setError('User not authorized to view reports');\n        } else {\n          setError('Failed to load reports. Please try again.');\n        }\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchReports();\n  }, [fetchReportsWithRetry, isAdmin, user]);\n\n  // Resolve a report\n  const resolveReport = async (report: Report): Promise<boolean> => {\n    if (!isAdmin || !user) return false;\n\n    try {\n      const reportRef = doc(firestore, 'reports', report.id);\n      \n      await updateDoc(reportRef, {\n        status: 'resolved',\n        resolvedAt: new Date(),\n        resolvedBy: user.uid,\n      });\n      \n      // Update local state\n      setReports((prev) =>\n        prev.filter((prevReport) => prevReport.id !== report.id)\n      );\n      \n      return true;\n    } catch (err) {\n      console.error('Error resolving report:', err);\n      return false;\n    }\n  };\n\n  // Dismiss a report\n  const dismissReport = async (report: Report): Promise<boolean> => {\n    if (!isAdmin || !user) return false;\n\n    try {\n      const reportRef = doc(firestore, 'reports', report.id);\n      \n      await updateDoc(reportRef, {\n        status: 'dismissed',\n        resolvedAt: new Date(),\n        resolvedBy: user.uid,\n      });\n      \n      // Update local state\n      setReports((prev) =>\n        prev.filter((prevReport) => prevReport.id !== report.id)\n      );\n      \n      return true;\n    } catch (err) {\n      console.error('Error dismissing report:', err);\n      return false;\n    }\n  };\n\n  // Function to trigger a refresh\n  const refresh = () => {\n    setRefreshTrigger((prev) => prev + 1);\n  };\n\n  return {\n    reports,\n    loading: loading || isRetrying,\n    error,\n    resolveReport,\n    dismissReport,\n    refresh,\n  };\n};\n\nexport default useReports;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}