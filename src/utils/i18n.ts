import i18n from 'i18next';
import { initReactI18next } from 'react-i18next';
import AsyncStorage from '@react-native-async-storage/async-storage';

// English translations
const enTranslations = {
  common: {
    appName: 'Kinza Berlin',
    loading: 'Loading...',
    error: 'An error occurred',
    retry: 'Retry',
    save: 'Save',
    cancel: 'Cancel',
    submit: 'Submit',
    next: 'Next',
    back: 'Back',
    done: 'Done',
    search: 'Search',
    filter: 'Filter',
    all: 'All',
    today: 'Today',
    tomorrow: 'Tomorrow',
    thisWeek: 'This Week',
    weekend: 'Weekend',
  },
  auth: {
    login: 'Login',
    register: 'Register',
    email: 'Email',
    password: 'Password',
    confirmPassword: 'Confirm Password',
    forgotPassword: 'Forgot Password?',
    resetPassword: 'Reset Password',
    displayName: 'Display Name',
    loginSuccess: 'Logged in successfully',
    registerSuccess: 'Registered successfully',
    logout: 'Logout',
    logoutSuccess: 'Logged out successfully',
    resetPasswordSuccess: 'Password reset email sent',
    continueAsGuest: 'Continue as Guest',
  },
  onboarding: {
    welcome: 'Welcome to Kinza Berlin',
    pickLanguage: 'Choose your preferred language',
    locationPermission: 'Allow location access to find events near you',
    enterZip: 'Or enter your ZIP code',
    childProfile: 'Add your child\'s details',
    childName: 'Child\'s name (optional)',
    childAge: 'Child\'s age',
    interests: 'Select your interests',
    signIn: 'Sign in to save your preferences',
    skip: 'Skip for now',
    consent: 'I consent to storing my child\'s information to personalize my experience',
    consentInfo: 'This information is used only to recommend relevant events and is never shared with third parties.',
    organiserPath: 'I want to create events',
    parentPath: 'I want to discover events',
    emailVerification: 'Please verify your email',
    verificationSent: 'Verification email sent',
    profileSetup: 'Set up your profile',
    orgName: 'Organization Name',
    website: 'Website (optional)',
    submitFirstEvent: 'Submit your first event',
    accessDashboard: 'Access your dashboard',
    adminConfirm: 'Please review and confirm moderation policies',
    getStarted: 'Get Started',
  },
  events: {
    title: 'Events',
    details: 'Event Details',
    create: 'Create Event',
    edit: 'Edit Event',
    name: 'Event Name',
    description: 'Description',
    date: 'Date',
    time: 'Time',
    location: 'Location',
    venue: 'Venue',
    ageRange: 'Age Range',
    minAge: 'Minimum Age',
    maxAge: 'Maximum Age',
    category: 'Category',
    tags: 'Tags',
    price: 'Price',
    free: 'Free',
    capacity: 'Capacity',
    organiser: 'Organiser',
    saved: 'Saved',
    unsaved: 'Save',
    rsvp: 'RSVP',
    share: 'Share',
    report: 'Report',
    indoor: 'Indoor',
    outdoor: 'Outdoor',
    strollerFriendly: 'Stroller Friendly',
    changingTable: 'Changing Table',
    parking: 'Parking Available',
    publicTransport: 'Public Transport',
    workshop: 'Workshop',
    playdate: 'Playdate',
    market: 'Market',
    performance: 'Performance',
    sport: 'Sport',
    art: 'Art',
    music: 'Music',
    nature: 'Nature',
    food: 'Food',
    education: 'Education',
    status: {
      draft: 'Draft',
      pending: 'Pending Approval',
      approved: 'Approved',
      rejected: 'Rejected',
    },
    validation: {
      titleRequired: 'Event title is required',
      venueRequired: 'Venue is required',
      dateRequired: 'Date is required',
      ageRangeRequired: 'Age range is required',
    },
  },
  map: {
    title: 'Map',
    nearby: 'Nearby',
    filters: 'Filters',
    distance: 'Distance',
    applyFilters: 'Apply Filters',
    resetFilters: 'Reset',
    noResults: 'No results found',
    searchHere: 'Search this area',
  },
  venues: {
    title: 'Venues',
    details: 'Venue Details',
    create: 'Add Venue',
    edit: 'Edit Venue',
    name: 'Venue Name',
    description: 'Description',
    address: 'Address',
    category: 'Category',
    amenities: 'Amenities',
    website: 'Website',
    phone: 'Phone',
    openingHours: 'Opening Hours',
    cafe: 'Café',
    playground: 'Playground',
    museum: 'Museum',
    library: 'Library',
    park: 'Park',
    pool: 'Swimming Pool',
    theater: 'Theater',
    zoo: 'Zoo',
    indoorPlayground: 'Indoor Playground',
  },
  profile: {
    title: 'Profile',
    editProfile: 'Edit Profile',
    savedEvents: 'Saved Events',
    childProfiles: 'Child Profiles',
    addChild: 'Add Child',
    settings: 'Settings',
    language: 'Language',
    notifications: 'Notifications',
    privacy: 'Privacy',
    terms: 'Terms of Service',
    help: 'Help & Support',
    about: 'About Kinza',
    deleteAccount: 'Delete Account',
    city: 'City',
  },
  comments: {
    title: 'Comments',
    write: 'Write a comment',
    reply: 'Reply',
    edit: 'Edit',
    delete: 'Delete',
    report: 'Report',
    placeholder: 'Share your thoughts...',
    posted: 'Comment posted',
    moderation: 'Your comment will be visible after moderation',
  },
  admin: {
    dashboard: 'Admin Dashboard',
    users: 'Users',
    events: 'Events',
    venues: 'Venues',
    comments: 'Comments',
    reports: 'Reports',
    moderation: 'Moderation Queue',
    approve: 'Approve',
    reject: 'Reject',
    pending: 'Pending',
    approved: 'Approved',
    rejected: 'Rejected',
    reason: 'Reason',
  },
  organiser: {
    dashboard: 'Organiser Dashboard',
    myEvents: 'My Events',
    analytics: 'Analytics',
    views: 'Views',
    saves: 'Saves',
    rsvps: 'RSVPs',
    createEvent: 'Create Event',
    drafts: 'Drafts',
    published: 'Published',
    feedback: 'Feedback',
  },
  errors: {
    auth: {
      invalidEmail: 'Invalid email address',
      weakPassword: 'Password is too weak',
      wrongPassword: 'Incorrect password',
      userNotFound: 'User not found',
      emailInUse: 'Email already in use',
      passwordMismatch: 'Passwords do not match',
    },
    permission: {
      denied: 'You don\'t have permission to access this feature',
      authRequired: 'Please sign in to access this feature',
      consentRequired: 'Please provide consent to access this feature',
    },
    form: {
      required: 'This field is required',
      invalid: 'Invalid input',
      tooShort: 'Input is too short',
      tooLong: 'Input is too long',
    },
  },
};

// German translations
const deTranslations = {
  common: {
    appName: 'Kinza Berlin',
    loading: 'Wird geladen...',
    error: 'Ein Fehler ist aufgetreten',
    retry: 'Wiederholen',
    save: 'Speichern',
    cancel: 'Abbrechen',
    submit: 'Absenden',
    next: 'Weiter',
    back: 'Zurück',
    done: 'Fertig',
    search: 'Suchen',
    filter: 'Filter',
    all: 'Alle',
    today: 'Heute',
    tomorrow: 'Morgen',
    thisWeek: 'Diese Woche',
    weekend: 'Wochenende',
  },
  auth: {
    login: 'Anmelden',
    register: 'Registrieren',
    email: 'E-Mail',
    password: 'Passwort',
    confirmPassword: 'Passwort bestätigen',
    forgotPassword: 'Passwort vergessen?',
    resetPassword: 'Passwort zurücksetzen',
    displayName: 'Anzeigename',
    loginSuccess: 'Erfolgreich angemeldet',
    registerSuccess: 'Erfolgreich registriert',
    logout: 'Abmelden',
    logoutSuccess: 'Erfolgreich abgemeldet',
    resetPasswordSuccess: 'E-Mail zum Zurücksetzen des Passworts gesendet',
    continueAsGuest: 'Als Gast fortfahren',
  },
  onboarding: {
    welcome: 'Willkommen bei Kinza Berlin',
    pickLanguage: 'Wähle deine bevorzugte Sprache',
    locationPermission: 'Erlaube Standortzugriff, um Veranstaltungen in deiner Nähe zu finden',
    enterZip: 'Oder gib deine Postleitzahl ein',
    childProfile: 'Füge die Daten deines Kindes hinzu',
    childName: 'Name des Kindes (optional)',
    childAge: 'Alter des Kindes',
    interests: 'Wähle deine Interessen',
    signIn: 'Melde dich an, um deine Einstellungen zu speichern',
    skip: 'Überspringen',
    consent: 'Ich stimme der Speicherung der Informationen meines Kindes zu, um meine Erfahrung zu personalisieren',
    consentInfo: 'Diese Informationen werden nur verwendet, um relevante Veranstaltungen zu empfehlen und werden niemals an Dritte weitergegeben.',
    organiserPath: 'Ich möchte Veranstaltungen erstellen',
    parentPath: 'Ich möchte Veranstaltungen entdecken',
    emailVerification: 'Bitte bestätige deine E-Mail',
    verificationSent: 'Bestätigungs-E-Mail gesendet',
    profileSetup: 'Richte dein Profil ein',
    orgName: 'Name der Organisation',
    website: 'Webseite (optional)',
    submitFirstEvent: 'Erstelle deine erste Veranstaltung',
    accessDashboard: 'Zugang zu deinem Dashboard',
    adminConfirm: 'Bitte überprüfe und bestätige die Moderationsrichtlinien',
    getStarted: 'Loslegen',
  },
  events: {
    title: 'Veranstaltungen',
    details: 'Veranstaltungsdetails',
    create: 'Veranstaltung erstellen',
    edit: 'Veranstaltung bearbeiten',
    name: 'Veranstaltungsname',
    description: 'Beschreibung',
    date: 'Datum',
    time: 'Uhrzeit',
    location: 'Ort',
    venue: 'Veranstaltungsort',
    ageRange: 'Altersbereich',
    minAge: 'Mindestalter',
    maxAge: 'Höchstalter',
    category: 'Kategorie',
    tags: 'Tags',
    price: 'Preis',
    free: 'Kostenlos',
    capacity: 'Kapazität',
    organiser: 'Veranstalter',
    saved: 'Gespeichert',
    unsaved: 'Speichern',
    rsvp: 'Teilnehmen',
    share: 'Teilen',
    report: 'Melden',
    indoor: 'Drinnen',
    outdoor: 'Draußen',
    strollerFriendly: 'Kinderwagen-freundlich',
    changingTable: 'Wickeltisch',
    parking: 'Parkplätze verfügbar',
    publicTransport: 'Öffentliche Verkehrsmittel',
    workshop: 'Workshop',
    playdate: 'Spieltreffen',
    market: 'Markt',
    performance: 'Aufführung',
    sport: 'Sport',
    art: 'Kunst',
    music: 'Musik',
    nature: 'Natur',
    food: 'Essen',
    education: 'Bildung',
    status: {
      draft: 'Entwurf',
      pending: 'Warten auf Genehmigung',
      approved: 'Genehmigt',
      rejected: 'Abgelehnt',
    },
    validation: {
      titleRequired: 'Veranstaltungstitel ist erforderlich',
      venueRequired: 'Veranstaltungsort ist erforderlich',
      dateRequired: 'Datum ist erforderlich',
      ageRangeRequired: 'Altersbereich ist erforderlich',
    },
  },
  map: {
    title: 'Karte',
    nearby: 'In der Nähe',
    filters: 'Filter',
    distance: 'Entfernung',
    applyFilters: 'Filter anwenden',
    resetFilters: 'Zurücksetzen',
    noResults: 'Keine Ergebnisse gefunden',
    searchHere: 'In diesem Bereich suchen',
  },
  // Additional German translations would continue here
};

// Italian translations
const itTranslations = {
  common: {
    appName: 'Kinza Berlin',
    loading: 'Caricamento...',
    error: 'Si è verificato un errore',
    retry: 'Riprova',
    save: 'Salva',
    cancel: 'Annulla',
    submit: 'Invia',
    next: 'Avanti',
    back: 'Indietro',
    done: 'Fatto',
    search: 'Cerca',
    filter: 'Filtro',
    all: 'Tutti',
    today: 'Oggi',
    tomorrow: 'Domani',
    thisWeek: 'Questa Settimana',
    weekend: 'Fine Settimana',
  },
  auth: {
    login: 'Accedi',
    register: 'Registrati',
    email: 'Email',
    password: 'Password',
    confirmPassword: 'Conferma Password',
    forgotPassword: 'Password dimenticata?',
    resetPassword: 'Reimposta Password',
    displayName: 'Nome visualizzato',
    loginSuccess: 'Accesso effettuato con successo',
    registerSuccess: 'Registrazione effettuata con successo',
    logout: 'Esci',
    logoutSuccess: 'Disconnessione effettuata con successo',
    resetPasswordSuccess: 'Email per reimpostare la password inviata',
    continueAsGuest: 'Continua come Ospite',
  },
  onboarding: {
    welcome: 'Benvenuto su Kinza Berlin',
    pickLanguage: 'Scegli la tua lingua preferita',
    locationPermission: 'Consenti l\'accesso alla posizione per trovare eventi vicino a te',
    enterZip: 'O inserisci il tuo codice postale',
    childProfile: 'Aggiungi i dettagli del tuo bambino',
    childName: 'Nome del bambino (opzionale)',
    childAge: 'Età del bambino',
    interests: 'Seleziona i tuoi interessi',
    signIn: 'Accedi per salvare le tue preferenze',
    skip: 'Salta per ora',
    consent: 'Acconsento alla memorizzazione delle informazioni del mio bambino per personalizzare la mia esperienza',
    consentInfo: 'Queste informazioni vengono utilizzate solo per consigliare eventi rilevanti e non vengono mai condivise con terze parti.',
    organiserPath: 'Voglio creare eventi',
    parentPath: 'Voglio scoprire eventi',
    emailVerification: 'Verifica la tua email',
    verificationSent: 'Email di verifica inviata',
    profileSetup: 'Configura il tuo profilo',
    orgName: 'Nome dell\'organizzazione',
    website: 'Sito web (opzionale)',
    submitFirstEvent: 'Invia il tuo primo evento',
    accessDashboard: 'Accedi alla tua dashboard',
    adminConfirm: 'Rivedi e conferma le politiche di moderazione',
    getStarted: 'Inizia',
  },
  events: {
    title: 'Eventi',
    details: 'Dettagli Evento',
    create: 'Crea Evento',
    edit: 'Modifica Evento',
    name: 'Nome Evento',
    description: 'Descrizione',
    date: 'Data',
    time: 'Ora',
    location: 'Luogo',
    venue: 'Sede',
    ageRange: 'Fascia d\'età',
    minAge: 'Età minima',
    maxAge: 'Età massima',
    category: 'Categoria',
    tags: 'Tag',
    price: 'Prezzo',
    free: 'Gratuito',
    capacity: 'Capacità',
    organiser: 'Organizzatore',
    saved: 'Salvato',
    unsaved: 'Salva',
    rsvp: 'Partecipa',
    share: 'Condividi',
    report: 'Segnala',
    indoor: 'Al coperto',
    outdoor: 'All\'aperto',
    strollerFriendly: 'Accessibile con passeggino',
    changingTable: 'Fasciatoio',
    parking: 'Parcheggio disponibile',
    publicTransport: 'Trasporto pubblico',
    workshop: 'Workshop',
    playdate: 'Incontro di gioco',
    market: 'Mercato',
    performance: 'Spettacolo',
    sport: 'Sport',
    art: 'Arte',
    music: 'Musica',
    nature: 'Natura',
    food: 'Cibo',
    education: 'Educazione',
    status: {
      draft: 'Bozza',
      pending: 'In attesa di approvazione',
      approved: 'Approvato',
      rejected: 'Rifiutato',
    },
    validation: {
      titleRequired: 'Il titolo dell\'evento è obbligatorio',
      venueRequired: 'La sede è obbligatoria',
      dateRequired: 'La data è obbligatoria',
      ageRangeRequired: 'La fascia d\'età è obbligatoria',
    },
  },
  map: {
    title: 'Mappa',
    nearby: 'Nelle vicinanze',
    filters: 'Filtri',
    distance: 'Distanza',
    applyFilters: 'Applica filtri',
    resetFilters: 'Reimposta',
    noResults: 'Nessun risultato trovato',
    searchHere: 'Cerca in questa zona',
  },
  // Additional Italian translations would continue here
};

// Initialize i18n
i18n
  .use(initReactI18next)
  .init({
    resources: {
      en: enTranslations,
      de: deTranslations,
      it: itTranslations,
    },
    lng: 'en', // Default language
    fallbackLng: 'en',
    interpolation: {
      escapeValue: false, // React already escapes values
    },
    react: {
      useSuspense: false,
    },
  });

// Function to load language from storage
export const loadLanguage = async () => {
  try {
    const storedLanguage = await AsyncStorage.getItem('userLanguage');
    if (storedLanguage) {
      await i18n.changeLanguage(storedLanguage);
      return storedLanguage;
    }
  } catch (error) {
    console.error('Error loading language from storage:', error);
  }
  return 'en'; // Default to English if no stored language
};

// Function to save language to storage
export const saveLanguage = async (language: string) => {
  try {
    await AsyncStorage.setItem('userLanguage', language);
    await i18n.changeLanguage(language);
  } catch (error) {
    console.error('Error saving language to storage:', error);
  }
};

export default i18n;
